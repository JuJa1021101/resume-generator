import{r as e,j as t,E as r,A as s,u as a,a as n,b as i,X as o,B as l,C as c,L as d,H as u,c as h,D as m,d as x,e as g,R as p,N as y,f,g as w}from"./react-vendor-2857afa5.js";import{c as b,p as v,a as j,b as N}from"./utils-vendor-5a5aa2b3.js";import{m as k}from"./ui-vendor-d6735759.js";import{t as E}from"./vendor-7e68e63b.js";const C={},S=function(e,t,r){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=function(e,t){return"."===e[0]?new URL(e,t).href:e}(e,r),e in C)return;C[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(r)for(let r=s.length-1;r>=0;r--){const a=s[r];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})};class R{static instance;errorReports=new Map;errorListeners=[];maxRetries=3;retryDelays=[1e3,2e3,4e3];constructor(){this.setupGlobalHandlers()}static getInstance(){return R.instance||(R.instance=new R),R.instance}setupGlobalHandlers(){window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason,{component:"Global",action:"unhandledrejection",timestamp:new Date})}),window.addEventListener("error",e=>{this.handleError(e.error,{component:"Global",action:"javascript-error",url:e.filename,timestamp:new Date,additionalData:{lineno:e.lineno,colno:e.colno}})}),window.addEventListener("error",e=>{e.target!==window&&this.handleError(new Error(`Resource loading failed: ${e.target?.src||"unknown"}`),{component:"Global",action:"resource-error",timestamp:new Date})},!0)}handleError(e,t={}){const r=this.generateErrorId(),s=e instanceof Error?e.message:String(e),a=e instanceof Error?e.stack:void 0,n=this.determineErrorType(e,s),i={id:r,type:n,severity:this.determineSeverity(n,s),message:s,stack:a,context:{timestamp:new Date,userAgent:navigator.userAgent,url:window.location.href,sessionId:this.getSessionId(),...t},resolved:!1,retryCount:0,maxRetries:this.maxRetries};return this.errorReports.set(r,i),this.notifyListeners(i),this.logError(i),r}determineErrorType(e,t){return e instanceof TypeError&&t.includes("fetch")?"NETWORK":t.includes("AI")||t.includes("model")||t.includes("analysis")?"AI_PROCESSING":t.includes("validation")||t.includes("invalid")?"VALIDATION":t.includes("storage")||t.includes("IndexedDB")?"STORAGE":t.includes("permission")||t.includes("denied")?"PERMISSION":t.includes("timeout")||t.includes("abort")?"TIMEOUT":"UNKNOWN"}determineSeverity(e,t){return"NETWORK"===e&&t.includes("offline")?"MEDIUM":"AI_PROCESSING"===e||"STORAGE"===e?"HIGH":"VALIDATION"===e?"LOW":t.includes("critical")||t.includes("fatal")?"CRITICAL":"MEDIUM"}async retryOperation(e,t,r){const s=this.errorReports.get(t);if(!s||s.retryCount>=s.maxRetries)throw new Error("Maximum retry attempts exceeded");try{const r=await e();return s.resolved=!0,this.errorReports.set(t,s),r}catch(a){if(s.retryCount++,this.errorReports.set(t,s),s.retryCount<s.maxRetries){const a=this.retryDelays[s.retryCount-1]||4e3;return await this.delay(a),this.retryOperation(e,t,r)}throw a}}delay(e){return new Promise(t=>setTimeout(t,e))}addErrorListener(e){this.errorListeners.push(e)}removeErrorListener(e){const t=this.errorListeners.indexOf(e);t>-1&&this.errorListeners.splice(t,1)}notifyListeners(e){this.errorListeners.forEach(t=>{try{t(e)}catch(r){}})}logError(e){this.getLogLevel(e.severity),e.type,e.message}getLogLevel(e){switch(e){case"CRITICAL":case"HIGH":return"error";case"MEDIUM":return"warn";default:return"log"}}generateErrorId(){return`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getSessionId(){let e=sessionStorage.getItem("sessionId");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("sessionId",e)),e}getErrorReport(e){return this.errorReports.get(e)}getAllErrors(){return Array.from(this.errorReports.values())}clearResolvedErrors(){for(const[e,t]of this.errorReports.entries())t.resolved&&this.errorReports.delete(e)}clearAllErrors(){this.errorReports.clear()}}const I=R.getInstance();class D{static instance;networkStatus={isOnline:navigator.onLine};requestQueue=new Map;statusListeners=[];maxQueueSize=50;maxRetries=3;constructor(){this.setupNetworkListeners(),this.updateNetworkInfo()}static getInstance(){return D.instance||(D.instance=new D),D.instance}setupNetworkListeners(){window.addEventListener("online",()=>{this.networkStatus.isOnline=!0,this.updateNetworkInfo(),this.notifyStatusListeners(),this.processQueuedRequests()}),window.addEventListener("offline",()=>{this.networkStatus.isOnline=!1,this.notifyStatusListeners()}),"connection"in navigator&&navigator.connection.addEventListener("change",()=>{this.updateNetworkInfo(),this.notifyStatusListeners()})}updateNetworkInfo(){if("connection"in navigator){const e=navigator.connection;this.networkStatus={...this.networkStatus,connectionType:e.type,effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}}}async fetchWithRetry(e,t={},r=this.maxRetries){if(!this.networkStatus.isOnline)return this.queueRequest(e,t,r);const s=new AbortController,a=setTimeout(()=>s.abort(),3e4);try{const r=await fetch(e,{...t,signal:s.signal});if(clearTimeout(a),!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r}catch(n){if(clearTimeout(a),n instanceof Error){if(I.handleError(n,{component:"NetworkHandler",action:"fetch",additionalData:{url:e,method:t.method||"GET"}}),r>0&&this.shouldRetry(n))return await this.delay(this.getRetryDelay(this.maxRetries-r)),this.fetchWithRetry(e,t,r-1);if(!this.networkStatus.isOnline)return this.queueRequest(e,t,r)}throw n}}shouldRetry(e){return["fetch","network","timeout","abort","ECONNRESET","ENOTFOUND","ECONNREFUSED"].some(t=>e.message.toLowerCase().includes(t))}getRetryDelay(e){const t=1e3*Math.pow(2,e),r=1e3*Math.random();return Math.min(t+r,1e4)}async queueRequest(e,t,r){if(this.requestQueue.size>=this.maxQueueSize){const e=this.requestQueue.keys().next().value;this.requestQueue.delete(e)}const s=this.generateRequestId(),a={id:s,url:e,options:t,timestamp:new Date,retryCount:0,maxRetries:r};return this.requestQueue.set(s,a),new Promise((e,t)=>{const r=()=>{this.networkStatus.isOnline?this.processQueuedRequest(s).then(e).catch(t):setTimeout(r,1e3)};r()})}async processQueuedRequests(){const e=Array.from(this.requestQueue.values());for(const r of e)try{await this.processQueuedRequest(r.id)}catch(t){}}async processQueuedRequest(e){const t=this.requestQueue.get(e);if(!t)throw new Error(`Queued request ${e} not found`);try{const r=await this.fetchWithRetry(t.url,t.options,t.maxRetries-t.retryCount);return this.requestQueue.delete(e),r}catch(r){throw t.retryCount++,t.retryCount>=t.maxRetries&&this.requestQueue.delete(e),r}}delay(e){return new Promise(t=>setTimeout(t,e))}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}addStatusListener(e){this.statusListeners.push(e)}removeStatusListener(e){const t=this.statusListeners.indexOf(e);t>-1&&this.statusListeners.splice(t,1)}notifyStatusListeners(){this.statusListeners.forEach(e=>{try{e(this.networkStatus)}catch(t){}})}getNetworkStatus(){return{...this.networkStatus}}getQueuedRequestsCount(){return this.requestQueue.size}clearQueue(){this.requestQueue.clear()}isConnectionFast(){const{effectiveType:e,downlink:t}=this.networkStatus;return"4g"===e||"5g"===e||!!(t&&t>1.5)}}const L=D.getInstance();class P extends e.Component{maxRetries=3;retryTimeouts=[];constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null,retryCount:0,isRetrying:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){const r=I.handleError(e,{component:"ErrorBoundary",action:"componentDidCatch",additionalData:{componentStack:t.componentStack,errorBoundary:!0}});this.setState({error:e,errorInfo:t,errorId:r}),this.props.onError?.(e,t),this.reportError(e,t,r)}componentWillUnmount(){this.retryTimeouts.forEach(e=>clearTimeout(e))}async reportError(e,t,r){try{e.message,e.stack,t.componentStack,navigator.userAgent,window.location.href,(new Date).toISOString()}catch(s){}}handleRetry=async()=>{if(!(this.state.retryCount>=this.maxRetries||this.state.isRetrying)){this.setState({isRetrying:!0});try{if(this.state.errorId){const e=I.getErrorReport(this.state.errorId);e&&!e.resolved&&await I.retryOperation(async()=>Promise.resolve(),this.state.errorId)}this.setState(e=>({hasError:!1,error:null,errorInfo:null,errorId:null,retryCount:e.retryCount+1,isRetrying:!1}))}catch(e){this.setState(e=>({retryCount:e.retryCount+1,isRetrying:!1}))}}};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};getErrorSuggestion(){const{error:e}=this.state;if(!e)return"请尝试刷新页面或稍后再试。";const t=e.message.toLowerCase();return t.includes("network")||t.includes("fetch")?"网络连接出现问题，请检查网络连接后重试。":t.includes("chunk")||t.includes("loading")?"资源加载失败，请刷新页面重新加载。":t.includes("memory")||t.includes("heap")?"内存不足，请关闭其他标签页后重试。":"应用遇到了意外错误，请尝试刷新页面或稍后再试。"}isNetworkError(){const{error:e}=this.state;if(!e)return!1;const t=e.message.toLowerCase();return t.includes("network")||t.includes("fetch")||t.includes("connection")}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const e=this.isNetworkError(),a=L.getNetworkStatus(),n=this.state.retryCount<this.maxRetries;return t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4",children:t.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[t.jsx(r,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e?"网络连接问题":"出现了一些问题"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:this.getErrorSuggestion()}),e&&t.jsx("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:t.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["网络状态: ",a.isOnline?"在线":"离线",a.effectiveType&&` (${a.effectiveType})`]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n&&t.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:this.state.isRetrying?t.jsxs(t.Fragment,{children:[t.jsx(s,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"重试中..."]}):`重试 (${this.maxRetries-this.state.retryCount} 次机会)`}),t.jsx("button",{onClick:this.handleReload,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"刷新页面"}),t.jsx("button",{onClick:this.handleGoHome,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"返回首页"})]}),!1,this.state.errorId&&t.jsxs("p",{className:"mt-4 text-xs text-gray-400 dark:text-gray-500",children:["错误ID: ",this.state.errorId]})]})})}return this.props.children}}const T={currentPage:"/",navigationHistory:[],activeModal:null,modalData:{},sidebarOpen:!1,sidebarCollapsed:!1,globalLoading:!1,loadingStates:{},notifications:[],formData:{},formErrors:{},chartPreferences:{theme:"light",animations:!0,showTooltips:!0,showLegend:!0,colorScheme:"default"}},O=b()(v((e,t)=>({...T,setCurrentPage:r=>{const s=t().currentPage,a=t().navigationHistory;e({currentPage:r,navigationHistory:[s,...a].slice(0,10)})},navigateBack:()=>{const r=t().navigationHistory;if(r.length>0){const[t,...s]=r;e({currentPage:t,navigationHistory:s})}},clearNavigationHistory:()=>e({navigationHistory:[]}),openModal:(t,r)=>{e({activeModal:t,modalData:r?{[t]:r}:{}})},closeModal:()=>{e({activeModal:null,modalData:{}})},setModalData:r=>{const s=t().activeModal;s&&e({modalData:{...t().modalData,[s]:r}})},toggleSidebar:()=>{e(e=>({sidebarOpen:!e.sidebarOpen}))},setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebarCollapse:()=>{e(e=>({sidebarCollapsed:!e.sidebarCollapsed}))},setGlobalLoading:t=>e({globalLoading:t}),setLoadingState:(t,r)=>{e(e=>({loadingStates:{...e.loadingStates,[t]:r}}))},clearLoadingStates:()=>e({loadingStates:{}}),addNotification:r=>{const s={...r,id:"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),timestamp:new Date};if(e(e=>({notifications:[s,...e.notifications].slice(0,10)})),!1!==r.autoClose){const e=r.duration||5e3;setTimeout(()=>{t().removeNotification(s.id)},e)}},removeNotification:t=>{e(e=>({notifications:e.notifications.filter(e=>e.id!==t)}))},clearNotifications:()=>e({notifications:[]}),setFormData:(t,r)=>{e(e=>({formData:{...e.formData,[t]:r}}))},setFormErrors:(t,r)=>{e(e=>({formErrors:{...e.formErrors,[t]:r}}))},clearFormData:t=>{e(t?e=>{const{[t]:r,...s}=e.formData;return{formData:s}}:{formData:{}})},clearFormErrors:t=>{e(t?e=>{const{[t]:r,...s}=e.formErrors;return{formErrors:s}}:{formErrors:{}})},updateChartPreferences:t=>{e(e=>({chartPreferences:{...e.chartPreferences,...t}}))},resetUIState:()=>e({...T,chartPreferences:t().chartPreferences})}),{name:"ui-store",storage:j(()=>localStorage),partialize:e=>({sidebarCollapsed:e.sidebarCollapsed,chartPreferences:e.chartPreferences})})),A=()=>"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),q={isInitialized:!1,isLoading:!1,theme:"light",language:"zh-CN",performanceMetrics:null,error:null,sessionId:A(),lastActivity:null},M=b()(v((e,t)=>({...q,initialize:async()=>{e({isLoading:!0});try{await new Promise(e=>setTimeout(e,100)),e({isInitialized:!0,isLoading:!1,lastActivity:new Date})}catch(t){e({error:t instanceof Error?t.message:"Initialization failed",isLoading:!1})}},setLoading:t=>e({isLoading:t}),setTheme:t=>{e({theme:t}),document.documentElement.classList.toggle("dark","dark"===t)},setLanguage:t=>e({language:t}),updatePerformanceMetrics:r=>{const s=t().performanceMetrics;e({performanceMetrics:{loadTime:0,aiProcessingTime:0,renderTime:0,memoryUsage:0,cacheHitRate:0,...s,...r}})},setError:t=>e({error:t}),clearError:()=>e({error:null}),updateActivity:()=>e({lastActivity:new Date}),resetSession:()=>e({sessionId:A(),lastActivity:new Date,error:null})}),{name:"app-store",storage:j(()=>localStorage),partialize:e=>({theme:e.theme,language:e.language,sessionId:e.sessionId})})),H=({children:r})=>{n();const{sidebarOpen:s,setSidebarOpen:g,notifications:p}=O(),{theme:y,setTheme:f,language:w,setLanguage:b}=M(),{isCurrentPath:v}=function(){const t=a(),r=n(),s=i(),{setCurrentPage:o,navigateBack:l}=O();e.useEffect(()=>{o(r.pathname)},[r.pathname,o]);const c=e.useCallback((e,r)=>{t(e,r)},[t]),d=e.useCallback(()=>{c(F.home)},[c]),u=e.useCallback(e=>{const t=e?`${F.analysis}?jobId=${e}`:F.analysis;c(t)},[c]),h=e.useCallback(e=>{const t=e?`${F.results}/${e}`:F.results;c(t)},[c]),m=e.useCallback(()=>{c(F.history)},[c]),x=e.useCallback(()=>{l()},[l]),g=e.useCallback(()=>r.pathname,[r.pathname]),p=e.useCallback(()=>new URLSearchParams(r.search),[r.search]),y=e.useCallback(e=>r.pathname===e,[r.pathname]);return{navigateTo:c,goHome:d,goToAnalysis:u,goToResults:h,goToHistory:m,goBack:x,currentPath:r.pathname,searchParams:r.search,params:s,getCurrentPath:g,getSearchParams:p,isCurrentPath:y}}(),j=[{name:"zh-CN"===w?"首页":"Home",href:"/",icon:u},{name:"zh-CN"===w?"分析":"Analysis",href:"/analysis",icon:h},{name:"zh-CN"===w?"结果":"Results",href:"/results",icon:m},{name:"zh-CN"===w?"历史":"History",href:"/history",icon:x}];return t.jsxs("div",{className:"min-h-screen "+("dark"===y?"dark bg-gray-900":"bg-gray-50"),children:[t.jsx("header",{className:("dark"===y?"bg-gray-800 border-gray-700":"bg-white border-gray-200")+" shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>g(!s),className:"md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:s?t.jsx(o,{className:"h-6 w-6"}):t.jsx(l,{className:"h-6 w-6"})}),t.jsx(c,{className:"h-8 w-8 text-primary-600"}),t.jsx("h1",{className:"ml-2 text-xl font-bold "+("dark"===y?"text-white":"text-gray-900"),children:"AI Resume Generator"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[p.length>0&&t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full"}),t.jsxs("button",{className:"p-2 rounded-md "+("dark"===y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[t.jsx("span",{className:"sr-only",children:"Notifications"}),t.jsx("div",{className:"h-5 w-5 rounded-full bg-yellow-400"})]})]}),t.jsx("button",{onClick:()=>{f("light"===y?"dark":"light")},className:"p-2 rounded-md "+("dark"===y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"dark"===y?"🌞":"🌙"}),t.jsx("button",{onClick:()=>{b("zh-CN"===w?"en-US":"zh-CN")},className:"px-3 py-1 text-sm rounded-md "+("dark"===y?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"zh-CN"===w?"EN":"中文"}),t.jsx("nav",{className:"hidden md:flex space-x-8",children:j.map(e=>{const r=v(e.href);return t.jsxs(d,{to:e.href,className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(r?"text-primary-600 bg-primary-50 dark:bg-primary-900/20":"dark"===y?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.jsx(e.icon,{className:"h-4 w-4 mr-2"}),e.name]},e.name)})})]})]})})}),s&&t.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>g(!1),children:t.jsx("div",{className:`fixed left-0 top-0 h-full w-64 ${"dark"===y?"bg-gray-800":"bg-white"} shadow-lg`,onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h2",{className:"text-lg font-semibold "+("dark"===y?"text-white":"text-gray-900"),children:"zh-CN"===w?"导航":"Navigation"}),t.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-md "+("dark"===y?"text-gray-400 hover:text-white":"text-gray-400 hover:text-gray-500"),children:t.jsx(o,{className:"h-5 w-5"})})]}),t.jsx("nav",{className:"space-y-2",children:j.map(e=>{const r=v(e.href);return t.jsxs(d,{to:e.href,onClick:()=>g(!1),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(r?"text-primary-600 bg-primary-50 dark:bg-primary-900/20":"dark"===y?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.jsx(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.name)})})]})})}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-20 md:pb-8 "+("dark"===y?"text-white":"text-gray-900"),children:r}),t.jsx("nav",{className:`md:hidden fixed bottom-0 left-0 right-0 ${"dark"===y?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-t`,children:t.jsx("div",{className:"grid grid-cols-4 py-2",children:j.map(e=>{const r=v(e.href);return t.jsxs(d,{to:e.href,className:"flex flex-col items-center py-2 px-1 "+(r?"text-primary-600":"dark"===y?"text-gray-400":"text-gray-600"),children:[t.jsx(e.icon,{className:"h-5 w-5"}),t.jsx("span",{className:"text-xs mt-1",children:e.name})]},e.name)})})})]})};function _({size:e="md",message:r="加载中...",className:s=""}){return t.jsxs("div",{className:`flex flex-col items-center justify-center p-8 ${s}`,children:[t.jsx(k.div,{className:`border-4 border-blue-200 border-t-blue-600 rounded-full ${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]}`,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r&&t.jsx(k.p,{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:r})]})}const z=e.lazy(()=>S(()=>import("./HomePage-20aedc11.js"),["https://static.ai-resume.com/assets/js/assets/js/HomePage-20aedc11.js","https://static.ai-resume.com/assets/js/assets/js/react-vendor-2857afa5.js","https://static.ai-resume.com/assets/js/assets/js/vendor-7e68e63b.js"],import.meta.url).then(e=>({default:e.HomePage}))),$=e.lazy(()=>S(()=>import("./AnalysisPage-3bb866fa.js"),["https://static.ai-resume.com/assets/js/assets/js/AnalysisPage-3bb866fa.js","https://static.ai-resume.com/assets/js/assets/js/react-vendor-2857afa5.js","https://static.ai-resume.com/assets/js/assets/js/vendor-7e68e63b.js","https://static.ai-resume.com/assets/js/assets/js/utils-vendor-5a5aa2b3.js","https://static.ai-resume.com/assets/js/assets/js/ui-vendor-d6735759.js"],import.meta.url).then(e=>({default:e.AnalysisPage}))),U=e.lazy(()=>S(()=>import("./ResultsPage-b3bae600.js"),["https://static.ai-resume.com/assets/js/assets/js/ResultsPage-b3bae600.js","https://static.ai-resume.com/assets/js/assets/js/react-vendor-2857afa5.js","https://static.ai-resume.com/assets/js/assets/js/vendor-7e68e63b.js"],import.meta.url).then(e=>({default:e.ResultsPage}))),Q=e.lazy(()=>S(()=>import("./HistoryPage-dac7d14f.js"),["https://static.ai-resume.com/assets/js/assets/js/HistoryPage-dac7d14f.js","https://static.ai-resume.com/assets/js/assets/js/react-vendor-2857afa5.js","https://static.ai-resume.com/assets/js/assets/js/vendor-7e68e63b.js"],import.meta.url).then(e=>({default:e.HistoryPage}))),V=g([{path:"/",element:t.jsx(H,{}),errorElement:t.jsx(P,{}),children:[{index:!0,element:t.jsx(e.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(z,{})})},{path:"analysis",element:t.jsx(e.Suspense,{fallback:t.jsx(_,{}),children:t.jsx($,{})})},{path:"results/:analysisId?",element:t.jsx(e.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(U,{})})},{path:"history",element:t.jsx(e.Suspense,{fallback:t.jsx(_,{}),children:t.jsx(Q,{})})},{path:"*",element:t.jsx(y,{to:"/",replace:!0})}]}]);function G(){return t.jsx(p,{router:V})}const F={home:"/",analysis:"/analysis",results:"/results",history:"/history"};function J(...e){return E(N(e))}class W{static cleanJDContent(e){return e.trim().replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/<[^>]*>/g," ").replace(/\n{3,}/g,"\n\n").replace(/[ \t]+/g," ").replace(/[^\w\s\u4e00-\u9fa5.,;:!?()\[\]{}"'\-\n]/g,"").trim()}static validateJDContent(e){const t=[],r=this.cleanJDContent(e);if(!r||0===r.length)return t.push({field:"content",message:"职位描述不能为空",value:e}),t;r.length<50&&t.push({field:"content",message:"职位描述过短，请提供更详细的信息（至少50字符）",value:e}),r.length>1e4&&t.push({field:"content",message:"职位描述过长，请控制在10000字符以内",value:e});const s=/职位|岗位|招聘|position|job|role|工程师|开发|设计师|经理|专员/i.test(r),a=/要求|需要|必须|技能|经验|requirement|skill|experience|熟悉|掌握|了解/i.test(r);return s||a||t.push({field:"content",message:"内容似乎不是有效的职位描述，请确保包含职位信息和要求",value:e}),t}static extractJDPreview(e){const t=this.cleanJDContent(e),r=t.split("\n").filter(e=>e.trim()),s=r[0]?.match(/(.+?)(?:招聘|职位|岗位)/),a=s?.[1]?.trim(),n=t.match(/公司[:：]\s*([^\n]+)/),i=n?.[1]?.trim();return{title:a,company:i,keyRequirements:r.filter(e=>/要求|需要|必须|技能|经验|熟悉|掌握|了解/i.test(e)&&e.length>10&&e.length<200).slice(0,3).map(e=>e.trim())}}}const B=({onJDSubmit:s,maxLength:a=1e4,placeholder:n="请粘贴或输入目标岗位的职位描述...",disabled:i=!1,initialValue:l="",showPreview:c=!0,autoFocus:d=!1,className:u})=>{const h=e.useRef(null),[x,g]=e.useState({content:l,charCount:l.length,isValid:l.length>0,errors:[],isSubmitting:!1,showPreview:!1,preview:{keyRequirements:[]}}),p=function(t){const[r,s]=e.useState(t);return e.useEffect(()=>{const e=setTimeout(()=>{s(t)},500);return()=>{clearTimeout(e)}},[t,500]),r}(x.content);e.useEffect(()=>{if(p){const e=W.validateJDContent(p),t=W.extractJDPreview(p);g(r=>({...r,errors:e,isValid:0===e.length,preview:t,showPreview:c&&0===e.length&&p.length>100}))}else g(e=>({...e,errors:[],isValid:!1,showPreview:!1,preview:{keyRequirements:[]}}))},[p,c]);const y=e.useCallback(e=>{const t=e.target.value;t.length<=a&&g(e=>({...e,content:t,charCount:t.length}))},[a]),b=e.useCallback(e=>{e.preventDefault();const t=e.clipboardData.getData("text"),r=W.cleanJDContent(t);r.length<=a&&g(e=>({...e,content:r,charCount:r.length}))},[a]),v=e.useCallback(async e=>{if(e.preventDefault(),x.isValid&&!x.isSubmitting){g(e=>({...e,isSubmitting:!0}));try{const e=W.cleanJDContent(x.content);await s(e)}catch(t){}finally{g(e=>({...e,isSubmitting:!1}))}}},[x.isValid,x.isSubmitting,x.content,s]),j=e.useCallback(()=>{g(e=>({...e,content:"",charCount:0,isValid:!1,errors:[],showPreview:!1,preview:{keyRequirements:[]}})),h.current?.focus()},[]),N=e.useCallback(async()=>{if(x.content)try{await navigator.clipboard.writeText(x.content)}catch(e){}},[x.content]);return e.useEffect(()=>{const e=h.current;e&&(e.style.height="auto",e.style.height=`${Math.min(e.scrollHeight,400)}px`)},[x.content]),t.jsxs("div",{className:J("space-y-4",u),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(m,{className:"h-5 w-5 text-primary-600"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"职位描述输入"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:x.content&&t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:N,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"复制内容",children:t.jsx(f,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:j,className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"清空内容",children:t.jsx(o,{className:"h-4 w-4"})})]})})]}),t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:h,value:x.content,onChange:y,onPaste:b,placeholder:n,disabled:i||x.isSubmitting,autoFocus:d,className:J("input-field resize-none min-h-[200px] max-h-[400px]",x.errors.length>0&&"border-red-300 focus:border-red-500 focus:ring-red-500",x.isValid&&x.content.length>0&&"border-green-300 focus:border-green-500 focus:ring-green-500"),rows:8}),t.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center space-x-2",children:[t.jsxs("span",{className:J("text-xs font-medium",(()=>{const e=x.charCount/a;return e>.9?"text-red-600":e>.7?"text-yellow-600":"text-gray-500"})()),children:[x.charCount,"/",a]}),x.isValid&&x.content.length>0&&t.jsx(w,{className:"h-4 w-4 text-green-500"})]})]}),x.errors.length>0&&t.jsx("div",{className:"space-y-2",children:x.errors.map((e,s)=>t.jsxs("div",{className:"flex items-start space-x-2 text-sm text-red-600",children:[t.jsx(r,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:e.message})]},s))}),x.showPreview&&t.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"内容预览"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[x.preview.title&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-blue-800",children:"职位："}),t.jsx("span",{className:"text-blue-700",children:x.preview.title})]}),x.preview.company&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-blue-800",children:"公司："}),t.jsx("span",{className:"text-blue-700",children:x.preview.company})]}),x.preview.keyRequirements.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-blue-800",children:"关键要求："}),t.jsx("ul",{className:"mt-1 space-y-1",children:x.preview.keyRequirements.map((e,r)=>t.jsxs("li",{className:"text-blue-700 text-xs",children:["• ",e]},r))})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:!x.isValid||x.isSubmitting||i,className:J("btn-primary px-6 py-3 text-base",(!x.isValid||x.isSubmitting||i)&&"opacity-50 cursor-not-allowed"),children:x.isSubmitting?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"loading-spinner h-4 w-4"}),t.jsx("span",{children:"分析中..."})]}):"开始AI分析"})})]}),t.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[t.jsx("p",{children:"💡 提示："}),t.jsxs("ul",{className:"space-y-1 ml-4",children:[t.jsx("li",{children:"• 直接粘贴完整的职位描述以获得最佳分析效果"}),t.jsx("li",{children:"• 确保包含职位要求、技能需求等关键信息"}),t.jsx("li",{children:"• 系统会自动清理和优化输入内容"}),t.jsx("li",{children:"• 支持中英文混合内容分析"})]})]})]})};export{G as A,B as J};
